{% extends "main/base.html" %}
{% load i18n %}
{% block content %}

<div class="blog blog--style2 padding-top padding-bottom aside-bg">
	<div class="container">
		<div class="section-wrapper">
			<div class="row justify-content-center">
				<div class="col-lg-9 col-12">
					<div class="comment-respond">
						<h4>{% trans "Créer un article" %}</h4>
						<div class="add-comment">
							<form method="POST" enctype="multipart/form-data" class="comment-form">
								{% csrf_token %}
								{{ form.non_field_errors }}

								{{ form.title.errors }}
								<input type="text" name="title" placeholder="{% trans "Titre" %} {% trans "Ex: Mon Premier Article" %}" class="w-100" value="{{ form.title.value|default_if_none:'' }}" required>

								{{ form.content.errors }}
								<textarea name="content" rows="10" placeholder="{% trans "Écrivez votre article..." %} {% trans "Commencez à rédiger le contenu de votre article ici." %}" required>{{ form.content.value|default_if_none:'' }}</textarea>

								{{ form.image.errors }}
								<div style="margin: 10px 0;">
									<label style="display:block; margin-bottom: 8px; font-weight: 600; color: #16a34a;">
										<i class="fa-solid fa-image"></i> {% trans "Image de couverture" %}
									</label>
									<input type="file" name="image" class="w-100" accept="image/*" required style="padding: 8px; border: 2px solid #e0e0e0; border-radius: 6px; cursor: pointer;">
									<small style="display: block; margin-top: 8px; color: #16a34a; background: #f0fdf4; padding: 8px 12px; border-radius: 4px; border-left: 4px solid #16a34a;">
										<strong>✓ {% trans "Formats acceptés" %}:</strong> JPG, PNG, WebP
									</small>
								</div>

								{{ form.category.errors }}
								<div style="margin: 10px 0;">
									<label style="display:block; margin-bottom: 8px; font-weight: 600; color: #16a34a;">
										<i class="fa-solid fa-folder"></i> {% trans "Catégorie" %}
									</label>
									<select name="category" class="w-100" style="padding: 10px 12px; border: 2px solid #e0e0e0; border-radius: 6px; font-size: 14px; background-color: #fff; color: #333; cursor: pointer; transition: border-color 0.2s; appearance: none; background-image: url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22%23333%22 stroke-width=%222%22%3e%3cpolyline points=%226 9 12 15 18 9%22%3e%3c/polyline%3e%3c/svg%3e'); background-repeat: no-repeat; background-position: right 8px center; background-size: 20px; padding-right: 36px;" onmouseover="this.style.borderColor='#16a34a'" onmouseout="this.style.borderColor='#e0e0e0'">
										<option value="" style="color: #333; background-color: #fff;">-- {% trans "Sélectionner une catégorie" %} --</option>
										{% for cat in categories %}
											<option value="{{ cat }}" style="color: #333; background-color: #fff;" {% if form.category.value == cat %}selected{% endif %}>{{ cat }}</option>
										{% endfor %}
									</select>
								</div>

								{{ form.tags.errors }}
								<input type="text" name="tags" placeholder="{% trans "Étiquettes (séparées par des virgules)" %} {% trans "Ex: Python, JavaScript, Web" %}" class="w-100" value="{{ form.tags.value|default_if_none:'' }}">

								{{ form.keywords.errors }}
								<input type="text" name="keywords" placeholder="{% trans "Mots-clés SEO (optionnel)" %} {% trans "Ex: python, web, développement" %}" class="w-100" value="{{ form.keywords.value|default_if_none:'' }}">

								<div style="margin: 10px 0;">
									<label style="display:flex; gap:10px; align-items:center; padding: 12px; border: 2px solid #e0e0e0; border-radius: 6px; cursor: pointer; transition: all 0.2s; background-color: #fff;" onmouseover="this.style.borderColor='#16a34a'; this.style.backgroundColor='#f0fdf4';" onmouseout="this.style.borderColor='#e0e0e0'; this.style.backgroundColor='#fff';">
										<input type="checkbox" name="is_published" {% if form.is_published.value %}checked{% endif %} style="cursor: pointer; width: 18px; height: 18px; accent-color: #16a34a;">
										<span style="font-weight: 500; color: #333;">{% trans "Publier immédiatement" %}</span>
									</label>
								</div>

								<button type="submit" class="default-btn reverse"><span>{% trans "Créer l'article" %}</span></button>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

{% endblock %}
